<!DOCTYPE html>
<html data-theme="dark">
<head>
    <title>Remind-O-Matic</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.23/dist/full.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/kaplay@3001.0.0-alpha.20/dist/kaplay.js"></script>
</head>
<body class="bg-base-300 h-screen overflow-hidden">

    <div class="fixed top-0 left-0 w-full z-10 p-6 flex flex-col gap-4 pointer-events-none">
        <div class="flex justify-between items-center pointer-events-auto">
            <h1 class="text-3xl font-black text-primary italic">REMIND.JS</h1>
            <div class="badge badge-secondary font-bold">OFFLINE PRO</div>
        </div>

        <div class="join w-full max-w-md mx-auto shadow-2xl pointer-events-auto">
            <input id="remindInput" class="input input-bordered join-item w-full" placeholder="What's next?" />
            <button id="addBtn" class="btn btn-primary join-item">ADD</button>
        </div>
    </div>

    <script>
        // Start KAPLAY and attach to background
        const k = kaplay({
            global: true,
            background: [29, 35, 42], // Match DaisyUI 'dark' theme
            letterbox: true
        });

        let reminders = JSON.parse(localStorage.getItem("reminders")) || [];

        // Component to render the list
        function renderReminders() {
            destroyAll("item");
            
            reminders.forEach((text, i) => {
                const item = add([
                    rect(width() - 80, 60, { radius: 8 }),
                    pos(40, 160 + (i * 70)),
                    color(50, 50, 50),
                    area(),
                    outline(2, i % 2 == 0 ? rgb(100, 100, 255) : rgb(255, 100, 255)),
                    "item",
                    { id: i }
                ]);

                item.add([
                    text(text, { size: 20 }),
                    pos(20, 30),
                    anchor("left")
                ]);

                item.add([
                    text("DELETE", { size: 12 }),
                    pos(item.width - 20, 30),
                    anchor("right"),
                    color(255, 100, 100)
                ]);
            });
        }

        // Logic: Add Reminder
        const input = document.getElementById("remindInput");
        const btn = document.getElementById("addBtn");

        function addTask() {
            if (input.value.trim() !== "") {
                reminders.push(input.value);
                localStorage.setItem("reminders", JSON.stringify(reminders));
                input.value = "";
                renderReminders();
                k.burp(); // Fun sound effect!
            }
        }

        btn.onclick = addTask;
        onKeyPress("enter", addTask);

        // Logic: Delete Reminder
        onClick("item", (item) => {
            reminders.splice(item.id, 1);
            localStorage.setItem("reminders", JSON.stringify(reminders));
            renderReminders();
        });

        renderReminders();
    </script>

</body>
</html>
